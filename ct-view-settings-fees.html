<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-input/paper-input.html">

<link rel="import" href="../ct-currency-behaviour/ct-currency-behaviour.html">
<link rel="import" href="../ct-editable-switcher/ct-editable-switcher.html">
<link rel="import" href="../shared-styles/ct-application-theme.html">

<!--
`ct-view-settings-fees`
Element to view fees in settings on the Centular platform

@demo demo/index.html 
-->

<dom-module id="ct-view-settings-fees">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <template>

    <style is="global-styles">
      :host {
        display: block;
      }

      .fees-container .row {
        display: flex;
        align-items: center;
      }

    </style>

    <div class="container-fluid fees-container">

      <div class="row">
        <div class="col-sm-2 col-sm-offset-10">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-button class$="btn btn-block [[_computeBtnStyle(_isStateEdit)]]" on-tap="_editBtnHandler">[[_computeButtonText(_isStateEdit)]]</paper-button>
          </ct-editable-switcher>
        </div>

      </div>

      <div class="row">
        <div class="col-sm-4">
          <div><strong>Admin Fees (inc VAT)</strong></div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[formatMoney(_dataObj.adminFees.currencyValue)]]">
              <div prefix>R </div>
            </paper-input>
          </ct-editable-switcher>
        </div>
        <div class="col-sm-1">
          <div class="text-center">+</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[_dataObj.adminFees.percentageValue]]">
              <div suffix>%</div>
            </paper-input>
          </ct-editable-switcher>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12">
          <div><strong>Merchant Fees (inc VAT)</strong></div>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4">
          <div>Speedpay</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[formatMoney(_dataObj.speedPay.currencyValue)]]">
              <div prefix>R </div>
            </paper-input>
          </ct-editable-switcher>
        </div>
        <div class="col-sm-1">
          <div class="text-center">+</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[_dataObj.speedPay.percentageValue]]">
              <div suffix>%</div>
            </paper-input>
          </ct-editable-switcher>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4">
          <div>Credit Card</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[formatMoney(_dataObj.creditCard.currencyValue)]]">
              <div prefix>R </div>
            </paper-input>
          </ct-editable-switcher>
        </div>
        <div class="col-sm-1">
          <div class="text-center">+</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[_dataObj.creditCard.percentageValue]]">
              <div suffix>%</div>
            </paper-input>
          </ct-editable-switcher>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4">
          <div>EFT</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[formatMoney(_dataObj.eft.currencyValue)]]">
              <div prefix>R </div>
            </paper-input>
          </ct-editable-switcher>
        </div>
        <div class="col-sm-1">
          <div class="text-center">+</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[_dataObj.eft.percentageValue]]">
              <div suffix>%</div>
            </paper-input>
          </ct-editable-switcher>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4">
          <div>PayFast</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[formatMoney(_dataObj.payFast.currencyValue)]]">
              <div prefix>R </div>
            </paper-input>
          </ct-editable-switcher>
        </div>
        <div class="col-sm-1">
          <div class="text-center">+</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[_dataObj.payFast.percentageValue]]">
              <div suffix>%</div>
            </paper-input>
          </ct-editable-switcher>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4">
          <div>Self Vend</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[formatMoney(_dataObj.selfVend.currencyValue)]]">
              <div prefix>R </div>
            </paper-input>
          </ct-editable-switcher>
        </div>
        <div class="col-sm-1">
          <div class="text-center">+</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[_dataObj.selfVend.percentageValue]]">
              <div suffix>%</div>
            </paper-input>
          </ct-editable-switcher>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4">
          <div>Free Issue</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[formatMoney(_dataObj.freeIssue.currencyValue)]]">
              <div prefix>R </div>
            </paper-input>
          </ct-editable-switcher>
        </div>
        <div class="col-sm-1">
          <div class="text-center">+</div>
        </div>
        <div class="col-sm-3">
          <ct-editable-switcher edit-mode$="[[_isStateEdit]]">
            <paper-input type="text" allowed-pattern="[0-9\.]" no-label value="[[_dataObj.freeIssue.percentageValue]]">
              <div suffix>%</div>
            </paper-input>
          </ct-editable-switcher>
        </div>
      </div>
    </div>

  </template>

  <script>
      Polymer({

          is: 'ct-view-settings-fees',
          behaviors: [CurrencyBehaviours.CurrencyFormatBehaviour],

          properties: {
              _isStateEdit : {
                  type: Boolean,
                  value: function() {
                      return false;
                  },
              },

              _dataObj: {
                  type: Object,
                  value: function() {
                      return {
                          adminFees: {
                              currencyValue: 10,
                              percentageValue: 20
                          },
                          speedPay: {
                              currencyValue: 10,
                              percentageValue: 20
                          },
                          creditCard: {
                              currencyValue: 10,
                              percentageValue: 20
                          },
                          eft: {
                              currencyValue: 10,
                              percentageValue: 20
                          },
                          payFast: {
                              currencyValue: 10,
                              percentageValue: 20
                          },
                          selfVend: {
                              currencyValue: 10,
                              percentageValue: 20
                          },
                          freeIssue: {
                              currencyValue: 10,
                              percentageValue: 20
                          },

                      }
                  }
              }
          },

          _computeReadOnly : function(status){
              return (!status);
          },

          _computeButtonText: function(isEdit){
              return (isEdit) ? 'Save Fees' : 'Edit Fees';
          },

          _computeBtnStyle : function(isEdit){
              return (isEdit) ? "btn-primary" : "btn-default";
          },

          _toggleStatus : function(){
              this._isStateEdit = !this._isStateEdit;
          },

          _editBtnHandler : function(){
//            todo: event fired on edit/save
//            todo: event to emit notification

              this._toggleStatus();
          },

      });
  </script>
</dom-module>
